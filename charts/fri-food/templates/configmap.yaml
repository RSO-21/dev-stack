apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "fri-food.fullname" . }}-common
data:
{{- range $k, $v := .Values.config.common }}
  {{ $k }}: {{ $v | quote }}
{{- end }}
---
{{- range $name, $svc := .Values.services }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "fri-food.fullname" $ }}-{{ $name }}
{{- $cfg := (index $.Values.config $name) }}
{{- if $cfg }}
data:
{{- range $k, $v := $cfg }}
  {{ $k }}: {{ $v | quote }}
{{- end }}
{{- else }}
data: {}
{{- end }}
---
{{- end }}
